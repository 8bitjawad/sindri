{% extends "base.html" %}

{% block content %}
<div class="max-w-6xl mx-auto my-10 px-4">
    <h1 class="text-3xl font-bold text-center mb-10 text-blue-600">Booking Requests</h1>

    {% if bookings %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for booking in bookings %}
            <div class="rounded-2xl shadow-lg p-6 flex flex-col justify-between 
                        transition transform hover:scale-105
                        {% if booking.status == 'confirmed' %}bg-green-50 border border-green-400
                        {% elif booking.status == 'pending' %}bg-yellow-50 border border-yellow-400
                        {% elif booking.status == 'rejected' %}bg-red-50 border border-red-400{% endif %}">
                
                <!-- Booking Info -->
                <div>
                    <p class="text-gray-800 font-semibold mb-1">Customer: <span class="text-blue-600">{{ booking.user.username }}</span></p>
                    <p class="text-gray-700 mb-1">Service: <span class="font-medium">{{ booking.service.title }}</span></p>
                    <p class="text-gray-700 mb-1">Date: <span class="font-medium">{{ booking.date }}</span></p>
                    <p class="text-gray-700 mb-1">Slot: <span class="font-medium">{{ booking.slot }}</span></p>
                    <p class="text-gray-700 mt-2">Notes: <span class="italic">{{ booking.notes|default:"-" }}</span></p>
                    <p class="text-sm mt-2">Status: 
                        {% if booking.status == 'pending' %}
                            <span class="text-yellow-700 font-semibold">{{ booking.status|capfirst }}</span>
                        {% elif booking.status == 'confirmed' %}
                            <span class="text-green-700 font-semibold">{{ booking.status|capfirst }}</span>
                        {% else %}
                            <span class="text-red-700 font-semibold">{{ booking.status|capfirst }}</span>
                        {% endif %}
                    </p>
                </div>

                <!-- Approve / Reject Buttons -->
                {% if booking.status|lower == 'pending' %}
                <div class="mt-5 flex gap-3">
                    <a href="{% url 'approve_booking' booking.id %}" 
                       class="flex-1 bg-green-500 text-white py-2 rounded-xl text-center font-semibold hover:bg-green-600 transition shadow-md">
                        Approve
                    </a>
                    <a href="{% url 'reject_booking' booking.id %}" 
                       class="flex-1 bg-red-500 text-white py-2 rounded-xl text-center font-semibold hover:bg-red-600 transition shadow-md">
                        Reject
                    </a>
                </div>
                {% endif %}

            </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center text-gray-500 text-lg mt-10">No bookings found.</p>
    {% endif %}
</div>
{% endblock %}
